<!-- 
  index.html

  CSCI 6373 - Information Retrieval and Web Search
  Dr. Zhixiang Chen
  Fall 2025

  Created: 2025-10-09
  Last Edited: 2025-10-09

  Authors:
    - Ariana Gutierrez
    - Luis Martinez
    - Tristan Rodriguez
    - Alfredo Peña
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>CSCI 6373 Search Project</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <main class="container">
      <h1>CSCI 6373 Search Project</h1>
      <form class="search" method="get" action="{{ url_for('home') }}">
        <input
          type="text"
          name="q"
          placeholder="Search..."
          value="{{ q }}"
          autocomplete="off"
        />
        <button type="submit" aria-label="search">
          <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
            <path
              d="M3 12h16M13 5l7 7-7 7"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
      </form>

      <div class="hints">
        <div>Supports:</div>
        <ul>
          <li><code>information and retrieval or search</code> (boolean)</li>
          <li><code>"information retrieval"</code> (quoted phrase)</li>
          <li><code>normal searching with ranking</code> (ranked vector)</li>
        </ul>
      </div>

      {% if results is not none %}
      <section class="results">
        {% if reformulation and reformulation.has_expansion %}
        <div style="background: #000000; padding: 12px; margin-bottom: 16px; border-radius: 4px; border-left: 4px solid #1967d2;">
          <div style="font-weight: 600; margin-bottom: 8px;">Query expanded with: <span style="color: #1967d2;">{{ reformulation.expansion_terms|join(', ') }}</span></div>
          <div style="font-size: 13px; color: #5f6368;">
            <span style="color: #1967d2; font-weight: 600;">●</span> Original results
            &nbsp;&nbsp;&nbsp;
            <span style="color: #188038; font-weight: 600;">●</span> Expanded results
          </div>
        </div>
        {% endif %}

        {% if results %}
        <div class="result-count">
          {{ results|length }} result{{ '' if results|length == 1 else 's' }}
        </div>
        <ul>
          {% for doc in results %}
          {% set is_original = reformulation and doc in reformulation.original %}
          {% set is_expanded = reformulation and reformulation.has_expansion and doc not in reformulation.original %}
          <li>
            <a
              href="{{ url_for('serve_doc', filepath=links[doc]) }}"
              target="_blank"
              rel="noopener noreferrer"
              style="color: inherit; text-decoration: none; display: block"
            >
              <div style="color: #1a73e8; font-size: 13px">{{ links[doc] }}</div>
              <div style="margin-top: 6px; font-size: 15px; font-weight: 600; {% if is_original %}color: #1967d2;{% elif is_expanded %}color: #188038;{% endif %}">
                {{ titles[doc] }}
              </div>
              {% if snippets[doc] %}
              <div style="margin-top: 6px; color: #5f6368; font-size: 13px">{{ snippets[doc] }}</div>
              {% endif %}
            </a>
          </li>
          {% endfor %}
        </ul>
        {% else %}
        <div class="no-match">No Match...</div>
        {% endif %}
      </section>
      {% endif %}
    </main>
  </body>
</html>
